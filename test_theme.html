<!doctype html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Конструктор градиентов</title>
    <style>
      * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
      }

      body {
        background: #f5f7fa;
        color: #333;
        padding: 20px;
        line-height: 1.6;
      }

      .container {
        max-width: 1000px;
        margin: 0 auto;
        background: white;
        border-radius: 12px;
        box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
        padding: 25px;
      }

      h1 {
        text-align: center;
        margin-bottom: 25px;
        color: #2c3e50;
      }

      .gradient-preview {
        height: 200px;
        border-radius: 8px;
        margin-bottom: 25px;
        box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1);
        border: 1px solid #ddd;
      }

      .controls {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 20px;
      }

      .color-controls {
        background: #f8f9fa;
        padding: 20px;
        border-radius: 8px;
      }

      .gradient-controls {
        background: #f8f9fa;
        padding: 20px;
        border-radius: 8px;
      }

      h2 {
        margin-bottom: 15px;
        font-size: 1.2rem;
        color: #2c3e50;
      }

      .color-stops {
        margin-bottom: 20px;
      }

      .color-stop {
        display: flex;
        align-items: center;
        margin-bottom: 10px;
        gap: 10px;
      }

      input[type="color"] {
        width: 40px;
        height: 40px;
        border: none;
        border-radius: 4px;
        cursor: pointer;
      }

      input[type="range"] {
        flex: 1;
        height: 6px;
        background: #ddd;
        border-radius: 3px;
        outline: none;
      }

      input[type="range"]::-webkit-slider-thumb {
        -webkit-appearance: none;
        width: 18px;
        height: 18px;
        background: #4caf50;
        border-radius: 50%;
        cursor: pointer;
      }

      .position-value {
        width: 40px;
        text-align: center;
        font-weight: bold;
      }

      .buttons {
        display: flex;
        gap: 10px;
        margin-top: 15px;
      }

      button {
        padding: 10px 15px;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        font-weight: 600;
        transition: all 0.2s ease;
      }

      #add-color {
        background: #4caf50;
        color: white;
      }

      #remove-color {
        background: #f44336;
        color: white;
      }

      #copy-css {
        background: #2196f3;
        color: white;
      }

      button:hover {
        opacity: 0.9;
        transform: translateY(-2px);
      }

      select {
        width: 100%;
        padding: 10px;
        border: 1px solid #ddd;
        border-radius: 4px;
        margin-bottom: 15px;
      }

      .css-output {
        margin-top: 25px;
        padding: 15px;
        background: #2c3e50;
        color: #fff;
        border-radius: 6px;
        font-family: monospace;
        white-space: pre-wrap;
        overflow-x: auto;
      }

      .css-output h3 {
        margin-bottom: 10px;
        color: #fff;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>Конструктор градиентов</h1>

      <div class="gradient-preview" id="gradient-preview"></div>

      <div class="controls">
        <div class="color-controls">
          <h2>Управление цветами</h2>
          <div class="color-stops" id="color-stops">
            <!-- Color stops will be added here dynamically -->
          </div>

          <div class="buttons">
            <button id="add-color">Добавить цвет</button>
            <button id="remove-color">Удалить цвет</button>
          </div>
        </div>

        <div class="gradient-controls">
          <h2>Настройки градиента</h2>
          <label for="gradient-type">Тип градиента:</label>
          <select id="gradient-type">
            <option value="linear">Линейный</option>
            <option value="radial">Радиальный</option>
          </select>

          <label for="gradient-angle">Угол (для линейного градиента):</label>
          <input
            type="range"
            id="gradient-angle"
            min="0"
            max="360"
            value="90"
          />
          <div class="angle-value">Угол: <span id="angle-value">90</span>°</div>

          <div class="buttons">
            <button id="copy-css">Скопировать CSS</button>
          </div>
        </div>
      </div>

      <div class="css-output">
        <h3>CSS код:</h3>
        <code id="css-code"></code>
      </div>
    </div>

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const gradientPreview = document.getElementById("gradient-preview");
        const colorStopsContainer = document.getElementById("color-stops");
        const addColorBtn = document.getElementById("add-color");
        const removeColorBtn = document.getElementById("remove-color");
        const copyCssBtn = document.getElementById("copy-css");
        const gradientType = document.getElementById("gradient-type");
        const gradientAngle = document.getElementById("gradient-angle");
        const angleValue = document.getElementById("angle-value");
        const cssCode = document.getElementById("css-code");

        let colorStops = [
          { color: "#ff0000", position: 0 },
          { color: "#0000ff", position: 100 },
        ];

        // Инициализация
        renderColorStops();
        updateGradient();

        // Добавление обработчиков событий
        addColorBtn.addEventListener("click", addColorStop);
        removeColorBtn.addEventListener("click", removeColorStop);
        copyCssBtn.addEventListener("click", copyCssToClipboard);
        gradientType.addEventListener("change", updateGradient);
        gradientAngle.addEventListener("input", function () {
          angleValue.textContent = this.value;
          updateGradient();
        });

        // Функции
        function renderColorStops() {
          colorStopsContainer.innerHTML = "";

          colorStops.forEach((stop, index) => {
            const colorStopElement = document.createElement("div");
            colorStopElement.className = "color-stop";

            colorStopElement.innerHTML = `
                        <input type="color" value="${stop.color}" data-index="${index}" class="color-picker">
                        <input type="range" min="0" max="100" value="${stop.position}" data-index="${index}" class="position-slider">
                        <span class="position-value">${stop.position}%</span>
                    `;

            colorStopsContainer.appendChild(colorStopElement);
          });

          // Добавляем обработчики для новых элементов
          document.querySelectorAll(".color-picker").forEach((picker) => {
            picker.addEventListener("input", function () {
              const index = parseInt(this.dataset.index);
              colorStops[index].color = this.value;
              updateGradient();
            });
          });

          document.querySelectorAll(".position-slider").forEach((slider) => {
            slider.addEventListener("input", function () {
              const index = parseInt(this.dataset.index);
              const value = parseInt(this.value);
              colorStops[index].position = value;
              this.nextElementSibling.textContent = `${value}%`;
              updateGradient();
            });
          });
        }

        function addColorStop() {
          if (colorStops.length >= 5) {
            alert("Максимальное количество цветов - 5");
            return;
          }

          // Находим промежуточную позицию для нового цвета
          let newPosition = 50;
          if (colorStops.length > 1) {
            const lastPosition = colorStops[colorStops.length - 2].position;
            newPosition = lastPosition + Math.floor((100 - lastPosition) / 2);
          }

          // Добавляем новый цвет (зеленый по умолчанию)
          colorStops.splice(colorStops.length - 1, 0, {
            color: "#00ff00",
            position: newPosition,
          });

          renderColorStops();
          updateGradient();
        }

        function removeColorStop() {
          if (colorStops.length <= 2) {
            alert("Минимальное количество цветов - 2");
            return;
          }

          colorStops.splice(colorStops.length - 2, 1);
          renderColorStops();
          updateGradient();
        }

        function updateGradient() {
          // Сортируем цвета по позиции
          const sortedStops = [...colorStops].sort(
            (a, b) => a.position - b.position
          );

          // Формируем строку градиента
          const gradientString = sortedStops
            .map((stop) => `${stop.color} ${stop.position}%`)
            .join(", ");

          // Применяем градиент в зависимости от типа
          if (gradientType.value === "linear") {
            gradientPreview.style.background = `linear-gradient(${gradientAngle.value}deg, ${gradientString})`;
            cssCode.textContent = `background: linear-gradient(${gradientAngle.value}deg, ${gradientString});`;
          } else {
            gradientPreview.style.background = `radial-gradient(circle, ${gradientString})`;
            cssCode.textContent = `background: radial-gradient(circle, ${gradientString});`;
          }
        }

        function copyCssToClipboard() {
          const textArea = document.createElement("textarea");
          textArea.value = cssCode.textContent;
          document.body.appendChild(textArea);
          textArea.select();
          document.execCommand("copy");
          document.body.removeChild(textArea);

          // Визуальное подтверждение копирования
          const originalText = copyCssBtn.textContent;
          copyCssBtn.textContent = "Скопировано!";
          setTimeout(() => {
            copyCssBtn.textContent = originalText;
          }, 2000);
        }
      });
    </script>
  </body>
</html>
